{% extends "base.html" %}

{% block javascript %}
  <script src="{{ url_for('static', filename='js/addremove.js') }}"></script>
{% endblock %}

{% block body %}
  <h1><i>{{ movie.title }}</i></h1>

  <div>
    <img src="{{ movie.poster_full_url }}"></img>
  </div>

  <br>
  {% if current_user.is_authenticated %}
    <div id="button-container">
    {% if not on_user_list %}
        <button id="add-button" type="submit"><h2>➕ Add film to list</h2></button>
    {% else %}
        <button id="remove-button" type="submit"><h2>➖ Remove film from list</h2></button>
    {% endif %}
    </div>
  {% endif %}

  <br>
  <div>
    <table class="table table-sm table-borderless table-striped">
      <tr>
        <th>Opening Date:</th>
        <td> {{ movie.release_date }} </td>
      </tr>

      <tr>
        <th>Overview:</th>
        <td> {{ movie.overview }} </td>
      </tr>

      <tr>
        <th>Runtime</th>
        <td> {{ movie.runtime }} minutes </td>
      </tr>

      {% if review is not none %}
        <tr>
          <th>NYT Critics Pick:</th>
          <td>
          {% if review_warning %}
            <span class='red'>
              (WARNING! This review may be referring to a later movie with the same title.
              Review publised {{ review.publication_date }}).
            </span><br>
          {% endif %}
          {% if review.critics_pick == 1 %}
            Yes!
          {% elif review.critics_pick == 0 %}
             No.
          {% else %}
             No review found.
          {% endif %}
            </td>
        </tr>
        <tr>
          <th>NYT Review Summary</th>
          <td> {% if review_warning %}
            <span class='red'>
              (WARNING! This review may be referring to a later movie with the same title.
              Review publised {{ review.publication_date }}).
            </span><br>
          {% endif %}
            {{ review.text }} </td>
        </tr>
      {% else %}

      <p> A movie review could not be found for this movie. </p>

      {% endif %}


      <tr>
        <th>IMDB Link</th>
        <td>
          {% if movie.imdb_full_url %}
            <a href="{{ movie.imdb_full_url }}" target="_blank">
              {{ movie.imdb_full_url }}
            </a>
          {% else %}
            <p> There is no IMDB link for this film. </p>
          {% endif %}
        </td>
      </tr>


    </table>
  </div>
  <!-- Data values required to add/remove film -->
  <input id="tmdb-id" type="hidden" value="{{ movie.id }}">
  <input id="title" type="hidden" value="{{ movie.title }}">
  <input id="year" type="hidden" value="{{ movie.release_year }}">


{% endblock %}
