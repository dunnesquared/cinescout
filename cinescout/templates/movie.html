{% extends "base.html" %}

{% block javascript %}
  <script src="{{ url_for('static', filename='js/addremove.js') }}"></script>
{% endblock %}

{% block body %}
  <h1><i>{{ movie.title }}</i></h1>

  <div>
    {% if movie.poster_full_url %}
      <img src="{{ movie.poster_full_url }}"></img>
    {% else %}
      <p>No poster available for this movie.</p>
    {% endif %}


  </div>

  <br>
  {% if current_user.is_authenticated %}
    <div id="button-container">
    {% if not on_user_list %}
        <button id="add-button" type="submit"><h2>➕ Add film to list</h2></button>
    {% else %}
        <button id="remove-button" type="submit"><h2>➖ Remove film from list</h2></button>
    {% endif %}
    </div>
  {% endif %}

  <br>
  <div>
    <table class="table table-sm table-borderless table-striped">

      <!--To set width of columns-->
      <colgroup>
        <col span=1 id="header-column">
        <col span=1 id="content-column">
      </colgroup>

      <tr>
        <th>Release Date</th>
        {% if movie.release_date %}
          <td> {{ movie.release_date }} </td>
        {% else %}
          <td> Release date unknown for this movie. </td>
        {% endif %}
      </tr>

      {% if movie.title != movie.original_title and movie.original_title is not none %}
      <tr>
        <th>Original Title</th>
          <td> {{ movie.original_title }} </td>
      </tr>
      {% endif %}

      <tr>
        <th>Overview</th>
        <td>
        {% if movie.overview %}
          {{ movie.overview }}
        {% else %}
          <span>A summary for this film could not be found.</span> 
        {% endif %}
        </td>
      </tr>

      <tr>
        <th>Runtime</th>
          {% if movie.runtime %}
            <td> {{ movie.runtime }} min </td>
          {% else %}
            <td> Runtime unknown for this movie. </td>
          {% endif %}
      </tr>

      <tr>
        <th>Movie Review</th>
        <td>
          {% if review is not none %}
          <div class="review">
              <span class="review-text">
                {{ review.text }}
                {% if review.critics_pick == 1 %}
                  <span title="Critic's Pick">⭐️</span>
                {% endif %}
              </span>
              <br>
              <span class="publication">
                New York Times, {{ review.publication_date }}
                  {% if review_warning %}
                    <sup>☂︎</sup>
                  {% endif %}
              </span>
            {% else %}
              <span> A movie review could not be found for this movie. </span>
          </div>
          {% endif %}
        </td>

      <tr>
        <th>IMDB Link</th>
        <td>
          {% if movie.imdb_full_url %}
            <a href="{{ movie.imdb_full_url }}" target="_blank">
              {{ movie.imdb_full_url }}
            </a>
          {% else %}
            <span> There is no IMDB link for this film. </span>
          {% endif %}
        </td>
      </tr>
    </table>

    {% if review_warning %}
      <p id="review-warning">
        <sup>☂︎</sup>
        <em>
          Because of a difference between the release and review dates,
          the movie review presented may be for another movie of the
          same title.
        </em>
      </p>
    {% endif %}

  </div>
  <!-- Data values required to add/remove film -->
  <input id="tmdb-id" type="hidden" value="{{ movie.id }}">
  <input id="title" type="hidden" value="{{ movie.title }}">
  <input id="year" type="hidden" value="{{ movie.release_year }}">


{% endblock %}
